大赛官网：http://codecraft.huawei.com/
前后花费近一个月时间投入在这次的2017华为挑战赛，我们所在的成渝区可算得上是竞争最激烈的赛区之一了，可惜眼看着我们小组从前面一点点跌倒64名开外，最后没能进入复赛，对于这次的NP-Hard问题，到最后也没有想到很好的办法来解决局部最优的问题。无论如何，还是有了很多收获。

一开始打算利用线性规划来解，断断续续用了一周在Lingo把官网case跑出来了，得到最优解783，但是耗时比较长，需要4秒。又尝试自己写单纯形法来解整数规划，耗时问题难以解决，遂放弃。后来网上有人分享，他用整数规划成功解决大case，用时超过2小时，而解决QQ群里面非官方的终极case则需要耗时一天以上，这条路的确行不通。

对于每个算例，直连消费节点相连的网络节点都是显而易见的可行解，所以队友建议基于此方案，进行节点替换增减来解决。首先与每个消费节点直接相连接的网络节点布局作为初始解，然后从全局网络节点考虑，对服务器集合要么随机减一个要么换一个要么加一个，然后利用每次的服务器集合来计算费用流，直到最后获取最少一次费用的服务器布局，其中，什么时候减和加都是随机数随机选择的，且减哪个和加哪个网络节点也是由随机数随机选择的，这样就保证了一定的随机性。但是这个方案虽然对于初始的简单算例能得到解，但由于本质上还是算暴力求解，所以对于后面的正式大规模算例行不通。

通过和扣扣群里同学交流，了解到在服务器选址这一块通过启发式算法会有不错的效果，于是决定从这方面开始入手。当时摆在面前的主要有模拟退火和遗传两种方案，最后选择了模拟退火算法，初始解还是采用的直连方式，但是每次随机加一个服务器或者减一个或者换一个并不是将这个概率设死，不是对当前花费没有减小的效果就舍弃这次抉择，而是以一定概率去接受，并且这个概率随着迭代深入慢慢减小，这样在一定程度上可以避免陷入局部最优。另外还根据每个网络节点的出度设计每个网络节点选择为服务器的权重，出度大的情况更希望被选择为服务器。

虽然通过方案实现了赛题的解决，但是由于经验不足，导致最后多次调参下来效果还是不理想，根本没有解决陷入局部最优的问题，直到比赛结束也没有解决，比较遗憾。现在看来，可能是因为服务器的选择随机性还是不够。

优化：
比赛过程中，对算法做了很多的优化工作，虽然最终没有逃出局部最优的困局，但是其余部分的优化做的还是可以的，主要包括以下：
    1、费用流计算中不管中间路线布局，我们将多源多汇问题优化为单元对单元，也就是模拟设计两个超级节点，一个连接所有服务器，一个连接所有消费节点，整个过程简化为单源单汇费用流问题；
　　2、每迭代一次不必重新加载所有图数据，我们采用个别数据还原再重新进行下一轮的最小费用流计算即可；
　　3、服务器集合存储的时候，我们采用标准模板库中set数据结构其实是最好的，第一服务器不会重复set很符合这个性质，第二set是基于红黑树实现的，插入删除很快速，所以使用set比其他任何数据结构都要好，这个设计又让我们的算法效率提高了不少。 

